<!DOCTYPE html>
<html>
  <head>
    <title>Tickets Page</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body>

    <h1>Tickets Page</h1>

    <script>
        if(localStorage.getItem("balance_") == null){
            localStorage.setItem("balance_", "0");
        }

        function add(){
            let number = +prompt("Enter the deposit amount");
            if(isNaN(number)) {
                alert('Error: Not valid number');
            }
            else {
                if(number > 0){
                    localStorage.setItem("balance_", parseInt(localStorage.getItem("balance_")) + number);
                    location.reload();
                    alert("Balance updated");
                }
                else{
                    alert("Error: Negative number");
                }
            }
        }

        document.write("<h2>Balance: $" + localStorage.getItem("balance_") + "<p id=\"demo\" onclick=\"add()\">Deposit money</p> </h2>");
        //localStorage.setItem("tickets_","ticket1.ticket2.ticket3");
        let tickets = localStorage.getItem("tickets_");
        function remove(number){
            let result = "";
            let arr = tickets.split(".");
            for(let i = 0; i < arr.length; i++){
                //console.log(i);
                console.log(number);
                if(i != number){
                    result += arr[i] + ".";
                }
            }
            result = result.substring(0, result.length - 1);
            localStorage.setItem("tickets_", result);
            localStorage.setItem("balance_", parseInt(localStorage.getItem("balance_")) + 50);
            location.reload();
        }
        let temp = "";
        let counter = 0;
        for(let i = 0; i <= tickets.length; i++){
            if(i == tickets.length && i != 0){
                document.write("<h3>" + temp + "<h3><p id=\"demo\" onclick=\"remove(" + counter + ")\">Cancel ticket for 50% refund</p>");
                temp = "";
                counter++;
            }
            else if(tickets[i] == "."){
                document.write("<h3>" + temp + "<h3><p id=\"demo\" onclick=\"remove(" + counter + ")\">Cancel ticket for 50% refund</p>");
                temp = "";
                counter++;
            }
            else{
                temp += tickets[i]
            }
        }


        // function axolotl_(){
        //     localStorage.setItem("axolotl_", "false");
        //     localStorage.setItem("axolotl_likes", parseInt(localStorage.getItem("axolotl_likes")) - 1);
        //     location.reload();
        // }
        // if(localStorage.getItem("axolotl_") == "true"){
        //     document.write("<h3><a href=\"zoo-brian/axolotl.html\">Axolotl</a> <p id=\"demo\" onclick=\"axolotl_()\">Refund</p></h3>");
        // }
        // function dolphin_(){
        //     localStorage.setItem("dolphin_", "false");
        //     localStorage.setItem("dolphin_likes", parseInt(localStorage.getItem("dolphin_likes")) - 1);
        //     location.reload();
        // }
        // if(localStorage.getItem("dolphin_") == "true"){
        //     document.write("<h3><a href=\"zoo-brian/dolphin.html\">Dolphin</a> <p id=\"demo\" onclick=\"dolphin_()\">Refund</p></h3>");
        // }
    </script>



    <h4>
        <div class = "back">
            <a href="index.html">Back to Home Page</a>
        </div>
    </h4>

  </body>
</html>
